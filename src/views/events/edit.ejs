<h2>Edit Event</h2>

<% if (error) { %>
  <div class="alert alert-danger"><%= error %></div>
<% } %>

<form action="/events/<%= event.event_id %>" method="POST">
  <div class="mb-3">
    <label>Title</label>
    <input type="text" name="title" value="<%= event.title %>" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>Description</label>
    <textarea name="description" class="form-control" required><%= event.description %></textarea>
  </div>

  <div class="mb-3">
    <label>Date</label>
    <input type="datetime-local" name="event_date" value="<%= event.event_date.toISOString().slice(0,16) %>" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>Location</label>
    <input type="text" name="location" value="<%= event.location %>" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>Capacity</label>
    <input type="number" name="capacity" value="<%= event.capacity %>" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>Price</label>
    <input type="number" name="price" step="0.01" value="<%= event.price %>" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>Categories</label><br>
    <% categories.forEach(cat => { %>
      <label class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" name="categories" value="<%= cat.category_id %>" 
          <%= selectedCategoryIds.includes(cat.category_id) ? 'checked' : '' %>> <%= cat.name %>
      </label>
    <% }) %>
  </div>

  <button type="submit" class="btn btn-primary">Save Changes</button>
</form>